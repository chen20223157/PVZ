# 功能测试清单 v2.0

## ✅ 测试前准备

- [ ] 使用现代浏览器（Chrome 90+、Firefox 88+、Edge 90+）
- [ ] 清空浏览器缓存（可选）
- [ ] 准备测试用图片（80x80 PNG，100x100 PNG）
- [ ] 打开浏览器控制台（F12）监控错误

---

## 🎮 基础游戏功能测试

### 1. 游戏启动
- [ ] 打开 index.html
- [ ] 显示加载界面
- [ ] 显示登录按钮
- [ ] 点击登录进入游戏
- [ ] FPS 计数器显示在左上角
- [ ] 背景和网格正确显示

### 2. 植物种植
- [ ] 点击豌豆射手卡片（100 阳光）
- [ ] 鼠标悬停显示黄色高亮
- [ ] 点击网格成功种植
- [ ] 阳光数量减少
- [ ] 植物显示在网格上
- [ ] 植物开始攻击僵尸

### 3. 阳光系统
- [ ] 天空自动掉落阳光
- [ ] 点击阳光收集
- [ ] 阳光飞向计数器
- [ ] 阳光数量增加
- [ ] 种植向日葵
- [ ] 向日葵定期生产阳光

### 4. 僵尸生成
- [ ] 游戏开始后僵尸从右侧出现
- [ ] 僵尸缓慢向左移动
- [ ] 僵尸类型随机（普通、路障、铁桶）
- [ ] 僵尸血条显示在头顶
- [ ] 僵尸走路有动画效果

### 5. 战斗系统
- [ ] 豌豆射手发射子弹
- [ ] 子弹击中僵尸
- [ ] 僵尸血量减少
- [ ] 僵尸死亡消失
- [ ] 寒冰射手减速僵尸
- [ ] 樱桃炸弹范围爆炸

### 6. 铲子功能
- [ ] 点击铲子按钮
- [ ] 铲子高亮显示
- [ ] 点击植物铲除
- [ ] 返还一半阳光
- [ ] 网格恢复可用

### 7. 暂停功能
- [ ] 按 P 或 ESC 暂停
- [ ] 显示"暂停"文字
- [ ] 游戏停止更新
- [ ] 再次按键继续游戏

---

## 🖼️ 图片导入功能测试

### 1. 打开图片管理器
- [ ] 按 I 键打开管理器
- [ ] 显示半透明遮罩
- [ ] 显示管理器面板
- [ ] 显示"植物图片"和"僵尸图片"标签
- [ ] 显示"上传图片"按钮
- [ ] 显示关闭按钮（×）

### 2. 上传植物图片
- [ ] 点击"植物图片"标签
- [ ] 点击"上传图片"按钮
- [ ] 打开文件选择对话框
- [ ] 选择一张 PNG 图片
- [ ] 弹出输入框，输入 `peashooter`
- [ ] 图片显示在列表中
- [ ] 图片显示预览
- [ ] 显示类型名称 `peashooter`
- [ ] 显示删除按钮

### 3. 上传僵尸图片
- [ ] 点击"僵尸图片"标签
- [ ] 点击"上传图片"按钮
- [ ] 选择一张 PNG 图片
- [ ] 输入 `normal`
- [ ] 图片显示在列表中

### 4. 图片应用
- [ ] 关闭管理器（按 I 或点击 ×）
- [ ] 种植豌豆射手
- [ ] 显示自定义图片（而不是几何绘制）
- [ ] 等待僵尸出现
- [ ] 僵尸显示自定义图片

### 5. 图片删除
- [ ] 打开管理器
- [ ] 点击图片的"删除"按钮
- [ ] 显示确认对话框
- [ ] 确认删除
- [ ] 图片从列表移除
- [ ] 关闭管理器
- [ ] 新种植的植物使用默认绘制

### 6. 图片持久化
- [ ] 上传一些图片
- [ ] 刷新页面（F5）
- [ ] 打开管理器
- [ ] 图片仍然存在列表中
- [ ] 图片仍然正常显示

### 7. 列表滚动
- [ ] 上传多张图片（6张以上）
- [ ] 列表超出可见区域
- [ ] 使用鼠标滚轮滚动
- [ ] 显示滚动条
- [ ] 滚动流畅

### 8. 错误处理
- [ ] 上传非图片文件
  - [ ] 显示错误提示或失败
- [ ] 输入错误的类型名称
  - [ ] 不创建图片或提示错误
- [ ] 上传超大图片（>5MB）
  - [ ] 成功或提示大小限制

---

## 🎨 植物编辑器测试

### 1. 打开编辑器
- [ ] 按 E 键打开
- [ ] 显示编辑器面板
- [ ] 显示所有输入字段

### 2. 创建自定义植物
- [ ] 输入植物属性
- [ ] 选择颜色、形状
- [ ] 保存植物
- [ ] 植物出现在卡片栏

### 3. 使用自定义植物
- [ ] 选择自定义植物
- [ ] 种植到网格
- [ ] 按照设置的属性工作

---

## 🚀 性能测试

### 1. FPS 监控
- [ ] 启动游戏
- [ ] 观察左上角 FPS
- [ ] 正常情况下 FPS ≥ 55
- [ ] 大量实体时 FPS ≥ 45

### 2. 内存测试
- [ ] 打开 Chrome 任务管理器
- [ ] 观察内存占用
- [ ] 正常游戏：≤ 100MB
- [ ] 长时间运行：不持续增长

### 3. 卡顿测试
- [ ] 种植 20 个植物
- [ ] 等待 15 个僵尸
- [ ] 观察游戏流畅度
- [ ] 不应出现明显卡顿

### 4. 背景缓存测试
- [ ] 游戏运行中
- [ ] 背景不闪烁
- [ ] 网格稳定显示
- [ ] 房子正确渲染

### 5. 对象池测试
- [ ] 发射大量子弹
- [ ] 生成大量粒子
- [ ] 观察内存占用
- [ ] 不应持续增长

### 6. 实体限制测试
- [ ] 让僵尸大量生成
- [ ] 观察最大僵尸数
- [ ] 不超过配置限制（30个）
- [ ] 游戏保持流畅

---

## 🔧 边界情况测试

### 1. LocalStorage 限制
- [ ] 上传 10+ 张图片
- [ ] 检查是否都能保存
- [ ] 刷新后检查是否都能加载

### 2. 快速操作
- [ ] 快速连续种植植物
- [ ] 快速点击阳光
- [ ] 快速铲除植物
- [ ] 游戏不崩溃

### 3. 极限场景
- [ ] 同时存在 20+ 植物
- [ ] 同时存在 15+ 僵尸
- [ ] 同时存在 50+ 子弹
- [ ] 游戏保持可玩性

### 4. 刷新和重启
- [ ] 游戏中途刷新
- [ ] 自定义数据保留
- [ ] 重新开始游戏正常

---

## 🌐 浏览器兼容性测试

### Chrome
- [ ] 功能正常
- [ ] 性能良好
- [ ] 图片正常显示

### Firefox
- [ ] 功能正常
- [ ] 性能良好
- [ ] 图片正常显示

### Edge
- [ ] 功能正常
- [ ] 性能良好
- [ ] 图片正常显示

### Safari（如适用）
- [ ] 功能正常
- [ ] 性能良好
- [ ] 图片正常显示

---

## 📱 响应式测试

### 不同分辨率
- [ ] 1920x1080
- [ ] 1366x768
- [ ] 缩放 75%
- [ ] 缩放 125%

---

## 🐛 已知问题验证

### 1. LocalStorage 溢出
- [ ] 上传大量大图片
- [ ] 检查是否有错误提示

### 2. 隐私模式
- [ ] 在隐私模式下打开
- [ ] 图片上传可能失败
- [ ] 有适当提示

---

## 📊 测试结果记录

### 测试环境
- **浏览器**: ___________
- **版本**: ___________
- **操作系统**: ___________
- **分辨率**: ___________
- **测试日期**: ___________

### 性能数据
- **平均 FPS**: ___________
- **内存占用**: ___________
- **加载时间**: ___________

### 发现的问题
1. ___________________________________
2. ___________________________________
3. ___________________________________

### 测试结论
- [ ] 通过所有测试
- [ ] 通过主要功能测试
- [ ] 发现严重问题
- [ ] 需要进一步优化

---

## 🎯 优先级分类

### P0 - 必须通过
- 游戏启动
- 基础种植
- 僵尸生成
- 战斗系统

### P1 - 重要功能
- 图片上传
- 图片显示
- 图片持久化
- 性能优化

### P2 - 次要功能
- 植物编辑器
- 铲子功能
- 暂停功能

### P3 - 优化项
- 边界处理
- 错误提示
- 用户体验

---

**测试完成后请记录结果！** 📝
