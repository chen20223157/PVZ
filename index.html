<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¤ç‰©å¤§æˆ˜åƒµå°¸ - Canvas Edition</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Arial', sans-serif;
      overflow: hidden;
    }

    #game-container {
      position: relative;
      box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      overflow: hidden;
    }

    canvas {
      display: block;
      background: #000;
      cursor: crosshair;
    }

    /* æ¸¸æˆè¯´æ˜é¢æ¿ */
    #instructions {
      position: absolute;
      bottom: -150px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      padding: 15px 25px;
      border-radius: 10px;
      font-size: 14px;
      line-height: 1.6;
      transition: bottom 0.3s ease;
      pointer-events: none;
    }

    #instructions:hover {
      bottom: 20px;
    }

    /* æ‚¬åœæç¤º */
    #hover-hint {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      padding: 8px 12px;
      border-radius: 5px;
      font-size: 12px;
      opacity: 0.7;
      pointer-events: none;
    }

    /* åŠ è½½ä¸­é®ç½© */
    #loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 1;
      transition: opacity 0.5s ease;
    }

    #loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-text {
      color: #fff;
      font-size: 24px;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }

    /* æ€§èƒ½ç›‘æ§ */
    #fps-counter {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.5);
      color: #0f0;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      font-family: 'Courier New', monospace;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <canvas id="gameCanvas"></canvas>
    <div id="fps-counter">FPS: 60</div>
    <div id="hover-hint">æ‚¬åœåº•éƒ¨æŸ¥çœ‹æ“ä½œè¯´æ˜</div>
  </div>

  <div id="instructions">
    <strong>æ“ä½œè¯´æ˜ï¼š</strong><br>
    ğŸ® æŒ‰ L æ‰“å¼€å…³å¡é€‰æ‹©ï¼Œé€‰æ‹©ä½ è¦æŒ‘æˆ˜çš„å…³å¡<br>
    ğŸŒ± ç‚¹å‡»å·¦ä¾§æ¤ç‰©å¡ç‰‡é€‰æ‹©æ¤ç‰©ï¼ˆé€šè¿‡å…³å¡è§£é”ï¼‰<br>
    ğŸ¯ ç‚¹å‡»ç½‘æ ¼æ”¾ç½®æ¤ç‰©ï¼ˆé»„è‰²é«˜äº®è¡¨ç¤ºå¯æ”¾ç½®ï¼‰<br>
    ğŸ¥„ ç‚¹å‡»é“²å­æŒ‰é’®ï¼Œç„¶åç‚¹å‡»æ¤ç‰©é“²é™¤å¹¶è¿”è¿˜ä¸€åŠé˜³å…‰<br>
    â˜€ï¸ ç‚¹å‡»é˜³å…‰æ”¶é›†ï¼ˆè‡ªåŠ¨é£å‘è®¡æ•°å™¨ï¼‰<br>
    ğŸ¨ æŒ‰ E æ‰“å¼€æ¤ç‰©ç¼–è¾‘å™¨ï¼Œåˆ›å»ºè‡ªå®šä¹‰æ¤ç‰©<br>
    ğŸ–¼ï¸ æŒ‰ I æ‰“å¼€å›¾ç‰‡ç®¡ç†å™¨ï¼Œå¯¼å…¥è‡ªå®šä¹‰æ¤ç‰©/åƒµå°¸å›¾ç‰‡<br>
    ğŸ›’ å°æ¨è½¦æ˜¯æœ€åé˜²çº¿ï¼Œåƒµå°¸åˆ°è¾¾æ—¶è‡ªåŠ¨è§¦å‘<br>
    ğŸš« å³é”®ç‚¹å‡»å–æ¶ˆé€‰æ‹©<br>
    â¸ï¸ æŒ‰ ESC æˆ– P æš‚åœæ¸¸æˆ<br>
    ğŸ¥• ä¿æŠ¤æˆ¿å­ï¼Œæ¶ˆç­æ‰€æœ‰åƒµå°¸è·èƒœå¹¶è§£é”æ–°æ¤ç‰©ï¼
  </div>

  <div id="loading-overlay">
    <div class="loading-text">åŠ è½½ä¸­...</div>
  </div>

  <script type="module">
    import { Game } from './Game.js';

    // åˆå§‹åŒ–æ¸¸æˆ
    const canvas = document.getElementById('gameCanvas');
    const loadingOverlay = document.getElementById('loading-overlay');
    const fpsCounter = document.getElementById('fps-counter');

    // è®¾ç½®ç”»å¸ƒå°ºå¯¸
    canvas.width = 900;
    canvas.height = 600;

    // åˆ›å»ºæ¸¸æˆå®ä¾‹
    const game = new Game(canvas);

    // FPS è®¡æ•°å™¨
    let frameCount = 0;
    let lastFpsUpdate = performance.now();

    function updateFps() {
      frameCount++;
      const now = performance.now();

      if (now - lastFpsUpdate >= 1000) {
        fpsCounter.textContent = `FPS: ${frameCount}`;
        frameCount = 0;
        lastFpsUpdate = now;
      }

      requestAnimationFrame(updateFps);
    }

    // å¯åŠ¨æ¸¸æˆ
    game.start();
    updateFps();

    // éšè—åŠ è½½é®ç½©
    setTimeout(() => {
      loadingOverlay.classList.add('hidden');
    }, 1000);

    // é˜²æ­¢å³é”®èœå•
    canvas.addEventListener('contextmenu', (e) => {
      e.preventDefault();
    });
  </script>
</body>
</html>
