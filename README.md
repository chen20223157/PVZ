# 🌻 植物大战僵尸 - 网页版 v3.0

一个基于原版《植物大战僵尸》的网页版游戏，使用纯 JavaScript 和 Canvas 实现。

![游戏版本](https://img.shields.io/badge/版本-v3.0-brightgreen)
![状态](https://img.shields.io/badge/状态-已完成-blue)
![语言](https://img.shields.io/badge/语言-JavaScript-yellow)

---

## 🎮 v3.0 新功能

### 核心更新
- ✨ **10个关卡系统** - 难度递增的关卡挑战
- 🔓 **植物渐进解锁** - 通关解锁新植物
- 🧟 **新僵尸：旗帜僵尸** - 速度更快的特殊僵尸
- 🛒 **小推车系统** - 每行最后防线
- 💣 **樱桃炸弹修复** - 爆炸功能正常工作
- 📊 **关卡进度显示** - 实时显示当前进度
- ⚖️ **难度平衡调整** - 降低25%难度

### 界面优化
- 🎯 关卡选择界面
- 🔒 植物解锁提示
- 📈 实时进度显示
- 🎨 更新操作说明

---

## 🚀 快速开始

### 方法1: 直接运行
```bash
# 1. 下载项目
git clone <项目地址>

# 2. 打开 index.html
# 双击文件或用浏览器打开

# 3. 开始游戏！
点击"开始游戏" → 选择第1关 → 开始玩
```

### 方法2: 运行测试
```bash
# 1. 打开 test.html
# 查看所有功能是否正常

# 2. 点击"启动游戏"
# 进入游戏主界面
```

---

## 📋 功能特性

### 🌱 植物系统
- **5种植物**，渐进解锁
- 向日葵 - 生产阳光
- 豌豆射手 - 基础攻击
- 坚果墙 - 防御保护
- 樱桃炸弹 - 范围爆炸
- 寒冰射手 - 减速攻击

### 🧟 僵尸系统
- **4种僵尸类型**
- 普通僵尸 - 基础单位
- 路障僵尸 - 有护甲
- 铁桶僵尸 - 高血量
- 旗帜僵尸 - 速度快（新增）

### 🎮 关卡系统
- **10个关卡**，难度递增
- 关卡选择界面
- 进度自动保存
- 每关解锁新植物

### 🛒 小推车系统
- 每行一辆小推车
- 僵尸到达时自动触发
- 一击必杀范围内所有僵尸

### 🎨 编辑器功能
- **植物编辑器** - 创建自定义植物
- **图片管理器** - 导入自定义图片
- 模板保存/加载

### ⚡ 性能优化
- 背景缓存
- 对象池系统
- 碰撞检测优化
- 视口剔除
- 粒子系统优化

---

## ⌨️ 操作说明

### 基础操作
| 操作 | 说明 |
|------|------|
| 点击植物卡片 | 选择要种植的植物 |
| 点击网格 | 放置选中的植物 |
| 点击阳光 | 收集阳光 |
| 点击铲子 | 铲除植物（返还50%阳光） |
| 右键点击 | 取消当前选择 |

### 快捷键
| 按键 | 功能 |
|------|------|
| **L** | 打开/关闭关卡选择 |
| **I** | 打开/关闭图片管理器 |
| **E** | 打开/关闭植物编辑器 |
| **P** | 暂停/继续游戏 |
| **ESC** | 暂停/继续游戏 |

---

## 📊 关卡列表

| 关卡 | 名称 | 难度 | 僵尸数 | 僵尸类型 | 解锁植物 |
|------|------|------|------|--------|---------|---------|
| 1 | 豌豆射手 | ⭐ | 10 | 普通 | 豌豆射手 🌱 |
| 2 | 向日葵 | ⭐ | 15 | 普通 | 向日葵 🌻 |
| 3 | 防御 | ⭐ | 20 | 普通+路障 | 坚果墙 🥜 |
| 4 | 防御 | ⭐⭐ | 25 | 普通+路障 | 樱桃炸弹 🍒 |
| 5 | 爆破 | ⭐⭐ | 30 | 普通+路障+铁桶 | 寒冰射手 ❄️ |
| 6 | 冰冻 | ⭐⭐ | 35 | 普通+路障+铁桶 | - |
| 7 | 挑战 | ⭐⭐⭐ | 40 | 全部+旗帜 | - |
| 8 | 旗帜僵尸 | ⭐⭐⭐ | 45 | 全部+旗帜 | - |
| 9 | 困难 | ⭐⭐⭐ | 50 | 全部+旗帜 | - |
| 10 | 终极挑战 | ⭐⭐⭐⭐ | 60 | 全部+旗帜 | - |

---

## 🎯 游戏流程

```
开始游戏
  ↓
关卡选择（选择第1关）
  ↓
游戏开始（只有豌豆射手）
  ↓
种植植物，消灭僵尸
  ↓
完成关卡
  ↓
🎉 解锁向日葵
🎉 解锁第2关
  ↓
按L选择下一关
  ↓
继续挑战...
```

---

## 📁 项目结构

```
claudecode_game/
├── index.html              # 游戏主页面
├── test.html              # 功能测试页面
├── Game.js                # 游戏主逻辑
├── config.js              # 游戏配置
│
├── 关卡系统/
│   ├── LevelSystem.js     # 关卡数据和进度
│   └── LevelSelect.js     # 关卡选择界面
│
├── 游戏实体/
│   ├── Plant.js           # 植物系统
│   ├── Zombie.js          # 僵尸系统
│   ├── Bullet.js          # 子弹系统
│   ├── Lawnmower.js       # 小推车系统
│   └── Grid.js            # 网格系统
│
├── 管理系统/
│   ├── Sun.js             # 阳光管理
│   ├── ParticleSystem.js  # 粒子效果
│   └── FSM.js             # 状态机
│
├── 编辑器/
│   ├── PlantEditor.js     # 植物编辑器
│   ├── AssetUploader.js   # 图片管理器
│   └── PlantTemplates.js  # 模板系统
│
├── 优化工具/
│   ├── PerformanceOptimizer.js  # 性能优化
│   ├── ObjectPool.js            # 对象池
│   └── Particle.js              # 粒子类
│
├── 界面/
│   └── LoginScreen.js     # 登录界面
│
└── 文档/
    ├── README.md          # 本文档
    ├── v3.0更新说明.md    # 详细更新日志
    └── 快速开始指南.md    # 新手指南
```

---

## 🔧 技术栈

- **前端**: 纯 JavaScript (ES6+)
- **渲染**: HTML5 Canvas
- **存储**: LocalStorage
- **模块化**: ES6 Modules
- **性能**: 对象池、空间分割、视口剔除

---

## 💡 设计特点

### 模块化设计
- ES6 模块系统
- 单一职责原则
- 低耦合高内聚

### 性能优化
- 背景预渲染
- 对象池复用
- 碰撞检测优化
- 按行管理系统

### 可扩展性
- 配置驱动
- 插件化编辑器
- 自定义内容支持

### 用户体验
- 流畅的动画
- 实时反馈
- 渐进式解锁
- 进度保存

---

## 🎮 游戏机制

### 阳光系统
- 初始阳光：50-200（根据关卡）
- 天降阳光：每8-15秒
- 向日葵生产：每24秒50阳光

### 植物机制
- 冷却时间：7.5-30秒
- 血量：300-4000
- 成本：50-150阳光

### 僵尸机制
- 血量：150-800
- 速度：0.008-0.012
- 伤害：20/秒

### 小推车
- 每行1辆
- 自动触发
- 伤害：999
- 用完不恢复

---

## 📈 更新历史

### v3.0 (当前版本)
- ✅ 10个关卡系统
- ✅ 植物渐进解锁
- ✅ 旗帜僵尸
- ✅ 小推车系统
- ✅ 樱桃炸弹修复
- ✅ 难度平衡
- ✅ 关卡进度显示

### v2.0
- ✅ 图片管理器（网格布局）
- ✅ 性能优化（8项）
- ✅ 粒子系统修复

### v1.0
- ✅ 基础游戏功能
- ✅ 5种植物
- ✅ 3种僵尸
- ✅ 植物编辑器

---

## 🐛 已知问题

暂无已知问题。

如发现bug，请检查：
1. 浏览器是否支持ES6
2. 是否启用了JavaScript
3. LocalStorage是否可用

---

## 🔮 未来计划

### 可能的扩展
- [ ] 更多关卡（11-20关）
- [ ] 更多植物类型
- [ ] 更多僵尸类型
- [ ] 特殊关卡（夜晚、泳池等）
- [ ] 成就系统
- [ ] 排行榜
- [ ] 音效和背景音乐
- [ ] 移动端适配
- [ ] 多语言支持

---

## 📝 开发笔记

### 关键改进
1. **模块化重构** - 从单文件到多模块
2. **性能优化** - 60fps稳定运行
3. **关卡系统** - 增加游戏深度
4. **渐进解锁** - 提升游戏体验

### 技术难点
1. **碰撞检测优化** - 按行管理减少检测
2. **对象池实现** - 避免频繁创建销毁
3. **进度持久化** - LocalStorage存储
4. **粒子系统** - 对象实例化问题

---

## 🤝 贡献

欢迎提交问题和改进建议！

### 如何贡献
1. Fork 项目
2. 创建特性分支
3. 提交改动
4. 推送到分支
5. 创建 Pull Request

---

## 📄 许可证

本项目仅供学习和娱乐使用。

---

## 🙏 致谢

- 原版《植物大战僵尸》- 灵感来源
- Canvas API - 渲染支持
- ES6 Modules - 模块化支持

---

## 📞 联系方式

如有问题或建议，请：
1. 查看文档：`v3.0更新说明.md`
2. 查看指南：`快速开始指南.md`
3. 运行测试：`test.html`

---

## 🎉 开始游戏

现在就打开 `index.html` 开始你的植物大战僵尸之旅！

**祝你玩得开心！** 🌻🧟‍♂️

---

**版本：** v3.0  
**最后更新：** 2024  
**状态：** ✅ 已完成并测试  
**平台：** 网页浏览器（Chrome, Firefox, Edge推荐）
